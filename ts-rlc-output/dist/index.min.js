"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var coreClient=require("@azure-rest/core-client"),logger$1=require("@azure/logger");const logger=logger$1.createClientLogger("undefined");function createClient(e,n={}){var i=null!=(i=n.baseUrl)?i:""+e,e=(n.apiVersion=null!=(e=n.apiVersion)?e:"2.0.0","azsdk-js--rest/1.0.0-beta.1"),e=n.userAgentOptions&&n.userAgentOptions.userAgentPrefix?n.userAgentOptions.userAgentPrefix+" "+e:e,e=(n=Object.assign(Object.assign({},n),{userAgentOptions:{userAgentPrefix:e},loggingOptions:{logger:null!=(e=null==(e=n.loggingOptions)?void 0:e.logger)?e:logger.info}}),coreClient.getClient(i,n));return e}const responseMap={"POST /chat/completions":["200"],"POST /audio/transcriptions":["200"],"POST /audio/translations":["200"],"POST /fine_tuning/jobs":["200"],"GET /fine_tuning/jobs":["200"],"GET /fine_tuning/jobs/{fine_tuning_job_id}":["200"],"GET /fine_tuning/jobs/{fine_tuning_job_id}/events":["200"],"POST /fine_tuning/jobs/{fine_tuning_job_id}/cancel":["200"],"POST /completions":["200"],"POST /edits":["200"],"POST /images/generations":["200"],"POST /images/edits":["200"],"POST /images/variations":["200"],"POST /embeddings":["200"],"GET /files":["200"],"POST /files":["200"],"POST /files/files/{file_id}":["200"],"DELETE /files/files/{file_id}":["200"],"GET /files/files/{file_id}/content":["200"],"POST /fine-tunes":["200"],"GET /fine-tunes":["200"],"GET /fine-tunes/{fine_tune_id}":["200"],"GET /fine-tunes/{fine_tune_id}/events":["200"],"POST /fine-tunes/{fine_tune_id}/cancel":["200"],"GET /models":["200"],"GET /models/{model}":["200"],"DELETE /models/{model}":["200"],"POST /moderations":["200"]};function isUnexpected(e){var n=e.headers["x-ms-original-url"],n=new URL(null!=n?n:e.request.url),i=e.request.method;let t=responseMap[i+" "+n.pathname];return!(t=t||getParametrizedPathSuccess(i,n.pathname)).includes(e.status)}function getParametrizedPathSuccess(e,n){var t,s,r,l=n.split("/");let o=-1,a=[];for([s,r]of Object.entries(responseMap))if(s.startsWith(e)){var u=getPathFromMapKey(s),g=u.split("/");let i=!0;for(let e=g.length-1,n=l.length-1;1<=e&&1<=n;e--,n--){if(null!=(f=g[e])&&f.startsWith("{")&&-1!==(null==(f=g[e])?void 0:f.indexOf("}"))){var f=g[e].indexOf("}")+1,d=null==(d=g[e])?void 0:d.length;if(new RegExp(""+(null==(t=g[e])?void 0:t.slice(f,d))).test(l[n]||""))continue;i=!1;break}if(g[e]!==l[n]){i=!1;break}}i&&u.length>o&&(o=u.length,a=r)}return a}function getPathFromMapKey(e){var n=e.indexOf("/");return e.slice(n)}exports.default=createClient,exports.isUnexpected=isUnexpected;